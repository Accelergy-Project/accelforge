
# Table 7 sparse config: sparse_iact_opt (used for conv2-5)
# Inputs and Outputs compressed at DRAM with UOP+RLE format.
# Gating at weights_spad on Weights conditioned on Inputs.
#
# Translates from table7_eyeriss_setup/sparse_opt/sparse_iact_opt.yaml

sparse_optimizations:
  targets:
  - target: DRAM
    representation_format:
    - name: Inputs
      ranks:
      - format: UOP
        payload_word_bits: 5
        flattened_rank_ids: [["R", "S", "P", "C", "M", "N", "Q"]]
      - format: RLE
        metadata_word_bits: 5
        flattened_rank_ids: [["R", "S", "P", "C", "M", "N", "Q"]]
    - name: Outputs
      ranks:
      - format: UOP
        payload_word_bits: 5
        flattened_rank_ids: [["P", "M", "N", "Q"]]
      - format: RLE
        metadata_word_bits: 5
        flattened_rank_ids: [["P", "M", "N", "Q"]]

  - target: weights_spad
    action_optimization:
    - kind: gating
      target: Weights
      condition_on: [Inputs]

  - target: MACs
    compute_optimization:
    - kind: gating
      target: Conv
      condition_on: [Inputs]
