# Fig1 bitmask format: UOP+B at BackingStorage+Buffer, gating SAF.
# Matches Sparseloop fig1 d=0.1 bitmask configuration.

sparse_optimizations:
  targets:
  - target: BackingStorage
    representation_format:
    - name: A
      format: bitmask
    - name: B
      format: bitmask

  - target: Buffer
    representation_format:
    - name: A
      format: bitmask
    - name: B
      format: bitmask
    action_optimization:
    - kind: gating
      target: A
      condition_on: [B]
    - kind: gating
      target: B
      condition_on: [A]

  - target: Reg
    action_optimization:
    - kind: gating
      target: Z
      condition_on: [A, B]
