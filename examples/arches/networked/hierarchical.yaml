arch:
  nodes:
  - !Memory
    name: MainMemory
    size: inf
    area: 0
    leak_power: 0
    tensors: {keep: All}
    actions:
    - {name: read, energy: 100, latency: 1e-9}
    - {name: write, energy: 100, latency: 1e-9}

  - !Memory
    name: GlobalBuffer
    size: inf
    area: 0
    leak_power: 0
    tensors: {keep: ~MainMemory, may_keep: All}
    actions:
    - {name: read, energy: 10, latency: 1e-9/4}
    - {name: write, energy: 10, latency: 1e-9/4}

  - !Network
    name: PeNoc
    area: 0
    leak_power: 0
    actions:
    - {name: hops, energy: 5, latency: 1e-9/4}

  - !Memory
    name: Scratchpad
    size: inf
    area: 0
    leak_power: 0
    tensors: {keep: All}
    actions:
    - {name: read, energy: 2, latency: 1e-9/16}
    - {name: write, energy: 2, latency: 1e-9/16}
    spatial:
    - {name: X, fanout: 2}
    - {name: Y, fanout: 2}

  - !Network
    name: MacNoc
    area: 0
    leak_power: 0
    actions:
    - {name: hops, energy: 1, latency: 1e-9/16}

  - !Compute
    name: MAC
    area: 0
    leak_power: 0
    actions:
    - {name: compute, energy: 1, latency: 1e-9}
    spatial:
    - {name: X, fanout: 2}
    - {name: Y, fanout: 2}