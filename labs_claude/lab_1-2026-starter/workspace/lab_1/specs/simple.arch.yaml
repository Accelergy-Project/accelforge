arch:
  nodes:
  - !Memory
    name: DRAM
    component_class: LPDDR4
    size: inf
    total_latency: (read_actions + write_actions)/(200e9)  # equivalent to 200 Gb/s bandwidth
    tensors:
      keep: All
    extra_attributes_for_component_model:
      width: 64

  - !Memory
    name: OnchipBuffer
    size: 1024*1024 # size in bits
    total_latency: (read_actions + write_actions)/64e12  # equivalent to 64 Tb/s bandwidth
    area: 0  # we are not modeling area
    leak_power: 0 # we are not modeling leakage
    tensors:
      keep: All
    actions:
    - name: read
      energy: 5
      latency: 0
    - name: write
      energy: 5
      latency: 0

  - !Compute
    name: MAC
    area: 0  # we are not modeling area
    leak_power: 0 # we are not modeling leakage
    spatial:
    - name: ComputeArrayX
      fanout: 32
      loop_bounds:
      - expression: c
        operator: ==
        value: 32
      - expression: m
        operator: ==
        value: 1
      - expression: p
        operator: ==
        value: 1
      - expression: q
        operator: ==
        value: 1
      - expression: n
        operator: ==
        value: 1
      - expression: r
        operator: ==
        value: 1
      - expression: s
        operator: ==
        value: 1
    - name: ComputeArrayY
      fanout: 256
      loop_bounds:
      - expression: c
        operator: ==
        value: 1
      - expression: m
        operator: ==
        value: 128
      - expression: p
        operator: ==
        value: 1
      - expression: q
        operator: ==
        value: 1
      - expression: r
        operator: ==
        value: 1
      - expression: s
        operator: ==
        value: 1
    actions:
    - name: compute
      energy: 1
      latency: 1e-9